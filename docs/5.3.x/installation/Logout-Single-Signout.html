<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - Logout & Single Logout</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.3.x/">v6.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.2.x/">v6.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.1.x/">v6.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.0.x/">v6.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.3.x/">v5.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.2.x/">v5.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.1.x/">v5.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.0.x/">v5.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.2.x/">v4.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.1.x/">v4.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.0.x/">v4.0.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    <h1 id="logout-and-single-logout-slo">Logout and Single Logout (SLO)</h1>

<p>There are potentially many active application sessions during a CAS single sign-on session, and the distinction between
logout and single logout is based on the number of sessions that are ended upon a <em>logout</em> operation. The scope of logout
is determined by where the action takes place:</p>

<ol>
  <li>Application logout - ends a single application session</li>
  <li>CAS logout - ends the CAS SSO session</li>
</ol>

<p>Note that the logout action in each case has no effect on the other in the simple case. Ending an application session
does not end the CAS session and ending the CAS session does not affect application sessions. This is a common cause of
confusion for new users and deployers of an SSO system.</p>

<p>The single logout support in CAS attempts to reconcile the disparity between CAS logout and application logout. When
CAS is configured for SLO, it attempts to send logout messages to every application that requested authentication to
CAS during the SSO session. While this is a best-effort process, in many cases it works well and provides a consistent
user experience by creating symmetry between login and logout.</p>

<div class="alert alert-info"><strong>SSO Sessions</strong><p>It is possible to review the current collection of active SSO sessions,
and determine if CAS itself maintains an active SSO session via the <a href="Monitoring-Statistics.html">CAS administration panels.</a></p></div>

<h2 id="cas-logout">CAS Logout</h2>

<p>Per the <a href="../protocol/CAS-Protocol.html">CAS Protocol</a>, the <code class="language-plaintext highlighter-rouge">/logout</code> endpoint is responsible for destroying the current SSO session.
Upon logout, it may also be desirable to redirect back to a service. This is controlled via specifying the redirect
link via the <code class="language-plaintext highlighter-rouge">service</code> parameter. The specified <code class="language-plaintext highlighter-rouge">service</code> must be registered in the service registry of CAS and enabled and
CAS must be allowed to follow service redirects.</p>

<p>To see the relevant list of CAS properties, please <a href="Configuration-Properties.html#logout">review this guide</a>.</p>

<h2 id="single-logout-slo">Single Logout (SLO)</h2>

<p>CAS is designed to support single sign out: it means that it will be able to invalidate client application sessions in addition to its own SSO session.<br />
Whenever a ticket-granting ticket is explicitly expired, the logout protocol will be initiated. Clients that do not support the
logout protocol may notice extra requests in their access logs that appear not to do anything.</p>

<div class="alert alert-warning"><strong>Usage Warning!</strong><p>Single Logout is turned on by default.</p></div>

<p>When a CAS session ends, it notifies each of the services that the SSO session is no longer valid, and that relying parties
need to invalidate their own session. Remember that the callback submitted to each CAS-protected application is simply
a notification; nothing more. It is the <strong>responsibility of the application</strong> to intercept that notification and properly
destroy the user authentication session, either manually, via a specific endpoint or more commonly via a CAS client library that supports SLO.</p>

<p>Also note that since SLO is a global event, all applications that have an authentication record with CAS will by default be
contacted, and this may disrupt user experience negatively if those applications are individually distinct from each other.
As an example, if user has logged into a portal application and an email application, logging out of one through SLO will
also destroy the user session in the other which could mean data loss if the application is not carefully managing its session and user activity.</p>

<p>To see the relevant list of CAS properties, please <a href="Configuration-Properties.html#single-logout">review this guide</a>.</p>

<h3 id="back-channel">Back Channel</h3>

<p>CAS sends an HTTP POST message directly to the service. This is the traditional way of performing notification to the service.</p>

<p>A sample back channel SLO message:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;samlp:LogoutRequest</span>
    <span class="na">xmlns:samlp=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span>
    <span class="na">xmlns:saml=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:assertion"</span>
    <span class="na">ID=</span><span class="s">"[RANDOM ID]"</span>
    <span class="na">Version=</span><span class="s">"2.0"</span>
    <span class="na">IssueInstant=</span><span class="s">"[CURRENT DATE/TIME]"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;saml:NameID&gt;</span>@NOT_USED@<span class="nt">&lt;/saml:NameID&gt;</span>
    <span class="nt">&lt;samlp:SessionIndex&gt;</span>[SESSION IDENTIFIER]<span class="nt">&lt;/samlp:SessionIndex&gt;</span>
<span class="nt">&lt;/samlp:LogoutRequest&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="front-channel">Front Channel</h3>

<p>CAS issues asynchronous AJAX <code class="language-plaintext highlighter-rouge">GET</code> logout requests via <code class="language-plaintext highlighter-rouge">JSONP</code> to authenticated services.
The expected behaviour of the CAS client is to invalidate the application web session.</p>

<div class="alert alert-warning"><strong>Usage Warning</strong><p>Front channel logout may not be available for all CAS clients. Ensure your CAS client does support this behavior before trying it out.</p></div>

<p>A sample front channel SLO request submitted by CAS resembles the following format:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>curl 'https://service.url?callback=jQuery112409319555380089843_1509437967792&amp;logoutRequest=[BASE64 encoded request]&amp;_=1509437967793'
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="slo-requests">SLO Requests</h2>

<p>The way the notification is done (<em>back</em> or <em>front</em> channel) is configured at a service level
through the <code class="language-plaintext highlighter-rouge">logoutType</code> property. This value is set to <code class="language-plaintext highlighter-rouge">LogoutType.BACK_CHANNEL</code> by default. The message is
delivered or the redirection is sent to the URL presented in the <em>service</em> parameter of the original CAS protocol ticket request.</p>

<p>The session identifier is the CAS service ticket ID that was provided to the service when it originally authenticated
to CAS. The session identifier is used to correlate a CAS session with an application session; for example, the SLO
session identifier maps to a servlet session that can subsequently be destroyed to terminate the application session.</p>

<h3 id="turning-off-single-logout">Turning Off Single Logout</h3>

<p>To see the relevant list of CAS properties, please <a href="Configuration-Properties.html#single-logout">review this guide</a>.</p>

<h3 id="redirecting-logout-to-service">Redirecting Logout to Service</h3>

<p>Logout requests may be optionally routed to an external URL bypassing the CAS logout screen. In order to to do you will need to specify the target destination typically in form of a <code class="language-plaintext highlighter-rouge">service</code> parameter to the CAS logout endpoint per the <a href="../protocol/CAS-Protocol-Specification.html">CAS protocol specification</a>.</p>

<h3 id="single-logout-per-service">Single Logout Per Service</h3>

<p>Registered applications with CAS have the option to control single logout behavior individually via
the <a href="Service-Management.html">Service Management</a> component. Each registered service in the service registry will include configuration
that describes how to the logout request should be submitted. This behavior is controlled via the <code class="language-plaintext highlighter-rouge">logoutType</code> property
which allows to specify whether the logout request should be submitted via back/front channel or turned off for this application.</p>

<p>Sample configuration follows:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"@class"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"org.apereo.cas.services.RegexRegisteredService"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"serviceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testId"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testId"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"logoutType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BACK_CHANNEL"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="service-endpoint-for-logout-requests">Service Endpoint for Logout Requests</h3>

<p>By default, logout requests are submitted to the original service id collected at the time of authentication.
CAS has the option to submit such requests to a specific service endpoint that is different
from the original service id, and of course can be configured on a per-service level. This is useful in
cases where the application that is integrated with CAS
does not exactly use a CAS client that supports intercepting such requests and instead, exposes a
different endpoint for its logout operations.</p>

<p>To configure a service specific endpoint, try the following example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"@class"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"org.apereo.cas.services.RegexRegisteredService"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"serviceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testId"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testId"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"logoutType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BACK_CHANNEL"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"logoutUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://web.application.net/logout"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="asynchronous-slo-messages">Asynchronous SLO Messages</h3>

<p>By default, backchannel logout messages are sent to endpoint in an asynchronous fashion.
This behavior can be modified via CAS settings. To see the relevant list of CAS properties, please <a href="Configuration-Properties.html#logout">review this guide</a>.</p>

<h2 id="sso-session-vs-application-session">SSO Session vs. Application Session</h2>

<p>In order to better understand the SSO session management of CAS and how it regards application sessions,
one important note is to be first and foremost considered:</p>

<div class="alert alert-info"><strong>CAS is NOT a session manager</strong><p>Application session is the responsibility of the application.</p></div>

<p>CAS wants to maintain and control the SSO session in the form of
the <code class="language-plaintext highlighter-rouge">TicketGrantingTicket</code> and a TGT id which is shared between the
user-agent and the CAS server in the form of a secure cookie.</p>

<p>CAS is not an application session manager in that it is the
responsibility of the applications to maintain and control their own
application sessions.  Once authentication is completed, CAS is
typically out of the picture in terms of the application sessions. Therefore, the expiration policy
of the application session itself is entirely independent of CAS and may be loosely coordinated
and adjusted depending on the ideal user experience in the event that the application session expires.</p>

<p>In the event that Single Logout is not activated, typically, application may expose a logout endpoint in order to destroy the session and next, redirect
the agent to the CAS <code class="language-plaintext highlighter-rouge">logout</code> endpoint in order to completely destroy the SSO session as well.</p>

<p>Hereâ€™s a brief diagram that demonstrates various application session configuration and interactions with CAS:</p>

<p><img src="http://i.imgur.com/0XyuLgz.png" alt="" /></p>

                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = '';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
