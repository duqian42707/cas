<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - Passwordless Authentication</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.3.x/">v6.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.2.x/">v6.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.1.x/">v6.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.0.x/">v6.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.3.x/">v5.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.2.x/">v5.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.1.x/">v5.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.0.x/">v5.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.2.x/">v4.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.1.x/">v4.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.0.x/">v4.0.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    <h1 id="passwordless-authentication">Passwordless Authentication</h1>

<p>Passwordless Authentication is a form of authentication in CAS where passwords take the form of tokens that expire after a configurable period of time. 
Using this strategy, users are simply asked for an identifier (i.e. username) which is used to locate the user record that contains forms of contact such as email and phone
number. Once located, the CAS-generated token is sent to the user via the configured notification strategies (i.e. email, sms, etc) where the user is then expected to 
provide the token back to CAS in order to proceed.</p>

<div class="alert alert-info"><strong>No Magic Link</strong><p>
Presently, there is no support for magic links that would remove the task of providing the token back to CAS allowing the user to proceed automagically.
This variant may be worked out in future releases.</p></div>

<p>In order to successfully implement this feature, configuration needs to be in place to contact account stores that hold user records who qualify for passwordless authentication. 
Similarly, CAS must be configured to manage issued tokens in order to execute find, validate, expire or save operations in appropriate data stores.</p>

<h2 id="overview">Overview</h2>

<p>Support is enabled by including the following module in the overlay:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apereo.cas<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>cas-server-support-passwordless-webflow<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${cas.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To see the relevant list of CAS properties, please <a href="../configuration/Configuration-Properties.html#passwordless-authentication">review this guide</a>.</p>

<h2 id="account-stores">Account Stores</h2>

<p>User records that qualify for passwordless authentication must be found by CAS using one of the following strategies. All strategies may be configured
using CAS settings and are activated depending on the presence of configuration values.</p>

<h3 id="simple">Simple</h3>

<p>This strategy provides a static map of usernames that are linked to their method of contact, such as email or phone number. It is best used
for testing and demo purposes. The key in the map is taken to be the username eligible for authentication while the value can either be an email
address or phone number that would be used to contact the user with issued tokens.</p>

<h3 id="mongodb">MongoDb</h3>

<p>This strategy simply allows one to locate a user record in MongoDb. The designated MongoDb collection is expectd to carry objects of type <code class="language-plaintext highlighter-rouge">PasswordlessUserAccount</code> in JSON format. To see the relevant list of CAS 
properties, please <a href="../configuration/Configuration-Properties.html#passwordless-authentication">review this guide</a>.</p>

<p>Support is enabled by including the following module in the overlay:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apereo.cas<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>cas-server-support-passwordless-mongo<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${cas.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ldap">LDAP</h3>

<p>This strategy simply allows one to locate a user record in an LDAP directory. The record is expected to carry the userâ€™s phone number
or email address via configurable attributes. To see the relevant list of CAS 
properties, please <a href="../configuration/Configuration-Properties.html#passwordless-authentication">review this guide</a>.</p>

<p>Support is enabled by including the following module in the overlay:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apereo.cas<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>cas-server-support-passwordless-ldap<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${cas.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="groovy">Groovy</h3>

<p>This strategy allows one to locate user records via a Groovy script. The body of the script may be defined as such:</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">org.apereo.cas.api.*</span>

<span class="kt">def</span> <span class="nf">run</span><span class="o">(</span><span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">def</span> <span class="n">username</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
    <span class="kt">def</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
    
    <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s2">"Locating user record for user $username"</span><span class="o">)</span>
    
    <span class="cm">/*
     ...
     Locate the record for the given username, and return the result back to CAS.
     ...
    */</span>
    
    <span class="kt">def</span> <span class="n">account</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PasswordlessUserAccount</span><span class="o">()</span>
    <span class="n">account</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">username</span><span class="o">)</span>
    <span class="n">account</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="s2">"username@example.org"</span><span class="o">)</span>
    <span class="n">account</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s2">"TestUser"</span><span class="o">)</span>
    <span class="n">account</span><span class="o">.</span><span class="na">setPhone</span><span class="o">(</span><span class="s2">"123-456-7890"</span><span class="o">)</span> 
    <span class="n">account</span><span class="o">.</span><span class="na">setAttributes</span><span class="o">(</span><span class="n">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s2">"..."</span><span class="o">,</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s2">"..."</span><span class="o">,</span> <span class="s2">"..."</span><span class="o">))</span> 
    <span class="n">account</span><span class="o">.</span><span class="na">setMultifactorAuthenticationEligible</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>  
    <span class="n">account</span><span class="o">.</span><span class="na">setRequestPassword</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
    <span class="k">return</span> <span class="n">account</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="rest">REST</h3>

<p>This strategy allows one design REST endpoints in charge of locating passwordless user records. A successful execution of the endpoint<br />
would produce a response body similar to the following:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"@class"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"org.apereo.cas.api.PasswordlessUserAccount"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"username"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"casuser"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cas@example.org"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"123-456-7890"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"CASUser"</span><span class="p">,</span><span class="w">        
  </span><span class="nl">"multifactorAuthenticationEligible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">  
  </span><span class="nl">"delegatedAuthenticationEligible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">  
  </span><span class="nl">"requestPassword"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"attributes"</span><span class="p">:{</span><span class="w"> </span><span class="nl">"lastName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"..."</span><span class="p">,</span><span class="w"> </span><span class="s2">"..."</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="custom">Custom</h3>

<p>You may also define your own user account store using the following bean definition and by implementing <code class="language-plaintext highlighter-rouge">PasswordlessUserAccountStore</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">PasswordlessUserAccountStore</span> <span class="nf">passwordlessUserAccountStore</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><a href="../configuration/Configuration-Management-Extensions.html">See this guide</a> to learn more about how to register configurations into the CAS runtime.</p>

<h2 id="token-management">Token Management</h2>

<p>The following strategies define how issued tokens may be managed by CAS.</p>

<h3 id="memory">Memory</h3>

<p>This is the default option where tokens are kept in memory using a cache with a configurable expiration period. Needless to say, this option 
is not appropriate in clustered CAS deployments inside there is not a way to synchronize and replicate tokens across CAS nodes.</p>

<h3 id="jpa">JPA</h3>

<p>This strategy allows one to store tokens and manage their expiration policy using a relational database.</p>

<p>Support is enabled by including the following module in the overlay:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apereo.cas<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>cas-server-support-passwordless-jpa<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${cas.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To see the relevant list of CAS 
properties, please <a href="../configuration/Configuration-Properties.html#passwordless-authentication">review this guide</a>.</p>

<h3 id="rest-1">REST</h3>

<p>This strategy allows one design REST endpoints in charge of managing tokens and their expiration policy entirely. 
CAS continues to generate tokens and the endpoint is only acting as a facade to the real token store, receiving tokens from CAS
in an encrypted fashion.</p>

<p>The following operations need to be supported by the endpoint:</p>

<table>
  <thead>
    <tr>
      <th>HTTP Method</th>
      <th>Description</th>
      <th>Parameter(s)</th>
      <th>Response</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">GET</code></td>
      <td>Locate tokens for the user.</td>
      <td><code class="language-plaintext highlighter-rouge">username</code></td>
      <td>Token in the response body.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DELETE</code></td>
      <td>Delete all tokens for the user.</td>
      <td><code class="language-plaintext highlighter-rouge">username</code></td>
      <td>N/A</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">DELETE</code></td>
      <td>Delete a single token for the user.</td>
      <td><code class="language-plaintext highlighter-rouge">username</code>, <code class="language-plaintext highlighter-rouge">token</code></td>
      <td>N/A</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">POST</code></td>
      <td>Save a token for the user.</td>
      <td><code class="language-plaintext highlighter-rouge">username</code>, <code class="language-plaintext highlighter-rouge">token</code></td>
      <td>N/A</td>
    </tr>
  </tbody>
</table>

<h3 id="custom-1">Custom</h3>

<p>You may also define your own token management store using the following bean definition and by implementing <code class="language-plaintext highlighter-rouge">PasswordlessTokenRepository</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">PasswordlessTokenRepository</span> <span class="nf">passwordlessTokenRepository</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><a href="../configuration/Configuration-Management-Extensions.html">See this guide</a> to learn more about how to register configurations into the CAS runtime.</p>

<h3 id="messaging--notifications">Messaging &amp; Notifications</h3>

<p>Users may be notified of tokens via text messages, mail, etc.
To learn more about available options, please <a href="../notifications/SMS-Messaging-Configuration.html">see this guide</a>
or <a href="../notifications/Sending-Email-Configuration.html">this guide</a>.</p>

<h2 id="disabling-passwordless-authentication-flow">Disabling Passwordless Authentication Flow</h2>

<p>Passwordless authentication can be disabled conditionally on a per-user basis. If the passwordless account retrieved from the account store
carries a user whose <code class="language-plaintext highlighter-rouge">requestPassword</code> is set to <code class="language-plaintext highlighter-rouge">true</code>, the passwordless flow (i.e. as described above with token generation, etc) will
be disabled and skipped in favor of the more usual CAS authentication flow, challenging the user for a password. Support for this behavior may depend
on each individual account store implementation.</p>

<h2 id="multifactor-authentication-integration">Multifactor Authentication Integration</h2>

<p>Passwordless authentication can be integrated with <a href="../mfa/Configuring-Multifactor-Authentication.html">CAS multifactor authentication providers</a>. In this scenario,
once CAS configuration is enabled to support this behavior via settings  or the located passwordless user account is considered <em>eligible</em> for multifactor authentication,
once CAS configuration is enabled to support this behavior or the located passwordless user account is considered <em>eligible</em> for multifactor authentication,
CAS will allow passwordless authentication to skip its own <em>intended normal</em> flow (i.e. as described above with token generation, etc) in favor of 
multifactor authentication providers that may be available and defined in CAS.</p>

<p>This means that if <a href="../mfa/Configuring-Multifactor-Authentication.html">multifactor authentication providers</a> are defined and activated, and defined 
<a href="../mfa/Configuring-Multifactor-Authentication-Triggers.html">multifactor triggers</a> in CAS signal availability and eligibility of an multifactor flow for the given passwordless user, CAS will skip 
its normal passwordless authentication flow in favor of the requested multifactor authentication provider and its flow. If no multifactor providers 
are available, or if no triggers require the use of multifactor authentication for the verified passwordless user, passwordless 
authentication flow will commence as usual.</p>

<p>To see the relevant list of CAS 
properties, please <a href="../configuration/Configuration-Properties.html#passwordless-authentication">review this guide</a>.</p>

<h2 id="delegated-authentication-integration">Delegated Authentication Integration</h2>

<p>Passwordless authentication can be integrated with <a href="../integration/Delegate-Authentication.html">CAS delegated authentication</a>. In this scenario,
once CAS configuration is enabled to support this behavior via settings or the located passwordless user account is considered <em>eligible</em> for delegated authentication,
CAS will allow passwordless authentication to skip its own <em>intended normal</em> flow (i.e. as described above with token generation, etc) in favor of 
delegated authentication that may be available and defined in CAS.</p>

<p>This means that if <a href="../integration/Delegate-Authentication.html">delegated authentication providers</a> are defined and activated, CAS will skip 
its normal passwordless authentication flow in favor of the requested multifactor authentication provider and its flow. If no delegated identity providers 
are available, passwordless authentication flow will commence as usual.</p>

<p>The selection of a delegated authentication identity provider for a passwordless user is handled 
using a script. The script may be defined as such:</p>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="kt">def</span> <span class="nf">run</span><span class="o">(</span><span class="n">Object</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">def</span> <span class="n">passwordlessUser</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
    <span class="kt">def</span> <span class="n">clients</span> <span class="o">=</span> <span class="o">(</span><span class="n">Set</span><span class="o">)</span> <span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>
    <span class="kt">def</span> <span class="n">httpServletRequest</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
    <span class="kt">def</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span>
    
    <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s2">"Testing username $passwordlessUser"</span><span class="o">)</span>

    <span class="k">return</span> <span class="n">clients</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The parameters passed are as follows:</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">passwordlessUser</code></td>
      <td>The object representing the <code class="language-plaintext highlighter-rouge">PasswordlessUserAccount</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">clients</code></td>
      <td>The object representing the collection of identity provider configurations.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">httpServletRequest</code></td>
      <td>The object representing the http request.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">logger</code></td>
      <td>The object responsible for issuing log messages such as <code class="language-plaintext highlighter-rouge">logger.info(...)</code>.</td>
    </tr>
  </tbody>
</table>

<p>The outcome of the script can be <code class="language-plaintext highlighter-rouge">null</code> to skip delegated authentication for the user, or it could a selection from the available identity providers
passed into the script.</p>

<p>To see the relevant list of CAS 
properties, please <a href="../configuration/Configuration-Properties.html#passwordless-authentication">review this guide</a>.</p>

                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = 'Authentication';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
