<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - SAML2 Authentication</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.3.x/">v6.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.2.x/">v6.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.1.x/">v6.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.0.x/">v6.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.3.x/">v5.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.2.x/">v5.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.1.x/">v5.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.0.x/">v5.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.2.x/">v4.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.1.x/">v4.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.0.x/">v4.0.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    <h1 id="saml2-authentication">SAML2 Authentication</h1>

<p>CAS can act as a SAML2 identity provider accepting authentication requests and producing SAML assertions.</p>

<h2 id="saml-endpoints">SAML Endpoints</h2>

<p>The following CAS endpoints respond to supported SAML2 profiles:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/cas/idp/profile/SAML2/Redirect/SSO</code></li>
  <li><code class="language-plaintext highlighter-rouge">/cas/idp/profile/SAML2/POST/SSO</code></li>
  <li><code class="language-plaintext highlighter-rouge">/cas/idp/profile/SAML2/POST/SLO</code></li>
  <li><code class="language-plaintext highlighter-rouge">/cas/idp/profile/SAML2/Unsolicited/SSO</code></li>
</ul>

<p>SAML2 IdP <code class="language-plaintext highlighter-rouge">Unsolicited/Initiated</code> SSO profile supports the following parameters:</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">providerId</code></td>
      <td>Required. Entity ID of the service provider.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">shire</code></td>
      <td>Optional. Response location (ACS URL) of the service provider.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">target</code></td>
      <td>Optional. Relay state.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">time</code></td>
      <td>Optional. Skew the authentication request.</td>
    </tr>
  </tbody>
</table>

<h2 id="idp-metadata">IdP Metadata</h2>

<p>The following CAS endpoints handle the generation of SAML2 metadata:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/cas/idp/metadata</code></li>
</ul>

<p>This endpoint will display the CAS IdP SAML2 metadata upon receiving a GET request. If metadata is already available and generated,
it will be displayed. If metadata is absent, one will be generated automatically. 
CAS configuration below dictates where metadata files/keys will be generated and stored.</p>

<div class="alert alert-info"><strong>Review Metadata</strong><p>Due to the way CAS handles the generation of metadata via external 
libraries, the generated metadata MUST be reviewed and massaged slightly to match the CAS configuration. All other elements MUST be 
removed.</p></div>

<p>Here is a generated metadata file as an example:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;EntityDescriptor</span>  <span class="na">xmlns=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:metadata"</span> <span class="na">xmlns:ds=</span><span class="s">"http://www.w3.org/2000/09/xmldsig#"</span> 
                <span class="na">xmlns:shibmd=</span><span class="s">"urn:mace:shibboleth:metadata:1.0"</span> <span class="na">xmlns:xml=</span><span class="s">"http://www.w3.org/XML/1998/namespace"</span> 
                <span class="na">xmlns:mdui=</span><span class="s">"urn:oasis:names:tc:SAML:metadata:ui"</span> <span class="na">entityID=</span><span class="s">"ENTITY_ID"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;IDPSSODescriptor</span> <span class="na">protocolSupportEnumeration=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:protocol"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Extensions&gt;</span>
            <span class="nt">&lt;shibmd:Scope</span> <span class="na">regexp=</span><span class="s">"false"</span><span class="nt">&gt;</span>SCOPE<span class="nt">&lt;/shibmd:Scope&gt;</span>
        <span class="nt">&lt;/Extensions&gt;</span>
        <span class="nt">&lt;KeyDescriptor</span> <span class="na">use=</span><span class="s">"signing"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ds:KeyInfo&gt;</span>
                    <span class="nt">&lt;ds:X509Data&gt;</span>
                        <span class="nt">&lt;ds:X509Certificate&gt;</span>...<span class="nt">&lt;/ds:X509Certificate&gt;</span>
                    <span class="nt">&lt;/ds:X509Data&gt;</span>
            <span class="nt">&lt;/ds:KeyInfo&gt;</span>
        <span class="nt">&lt;/KeyDescriptor&gt;</span>
        <span class="nt">&lt;KeyDescriptor</span> <span class="na">use=</span><span class="s">"encryption"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;ds:KeyInfo&gt;</span>
                    <span class="nt">&lt;ds:X509Data&gt;</span>
                        <span class="nt">&lt;ds:X509Certificate&gt;</span>...<span class="nt">&lt;/ds:X509Certificate&gt;</span>
                    <span class="nt">&lt;/ds:X509Data&gt;</span>
            <span class="nt">&lt;/ds:KeyInfo&gt;</span>
        <span class="nt">&lt;/KeyDescriptor&gt;</span>

        <span class="nt">&lt;NameIDFormat&gt;</span>urn:mace:shibboleth:1.0:nameIdentifier<span class="nt">&lt;/NameIDFormat&gt;</span>
        <span class="nt">&lt;NameIDFormat&gt;</span>urn:oasis:names:tc:SAML:2.0:nameid-format:transient<span class="nt">&lt;/NameIDFormat&gt;</span>

        <span class="nt">&lt;SingleLogoutService</span> <span class="na">Binding=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"</span> 
                             <span class="na">Location=</span><span class="s">"https://HOST_NAME/cas/idp/profile/SAML2/POST/SLO"</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;SingleSignOnService</span> <span class="na">Binding=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"</span> 
                             <span class="na">Location=</span><span class="s">"https://HOST_NAME/cas/idp/profile/SAML2/POST/SSO"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;SingleSignOnService</span> <span class="na">Binding=</span><span class="s">"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"</span> 
                             <span class="na">Location=</span><span class="s">"https://HOST_NAME/cas/idp/profile/SAML2/Redirect/SSO"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/IDPSSODescriptor&gt;</span>
<span class="nt">&lt;/EntityDescriptor&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="server-configuration">Server Configuration</h3>

<div class="alert alert-info"><strong>Server Configuration</strong><p>If you have deployed CAS in an external application server/servlet container
(i.e. Apache Tomcat) you will need to make sure
that the server is adjusted to handle large-enough <code>HttpHeaderSize</code> and <code>HttpPostSize</code> values (i.e. 2097152).
The embedded container that ships with CAS handles this automatically.</p></div>

<p>Note that CAS metadata endpoints for various bindings are typically available under <code class="language-plaintext highlighter-rouge">/cas/idp/...</code>. If you 
mean you use an existing metadata file whose binding endpoints begin with <code class="language-plaintext highlighter-rouge">/idp/...</code>, you may need to deploy
CAS at the root context path so it’s able to respond to those requests. (i.e. <code class="language-plaintext highlighter-rouge">https://sso.example.org/cas/login</code> becomes
<code class="language-plaintext highlighter-rouge">https://sso.example.org/login</code>).</p>

<h2 id="sp-metadata">SP Metadata</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">/cas/idp/servicemetadatagen</code></li>
</ul>

<p>This endpoint will attempt to generate metadata for relying party upon receiving a POST request. This is useful when integrating with
service providers that do not publish a defined metadata. The following parameters are expected by this point:</p>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">entityId</code></td>
      <td>Required.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">authnRequestSigned</code></td>
      <td>Optional. Defaults to <code class="language-plaintext highlighter-rouge">false</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">wantAssertionsSigned</code></td>
      <td>Optional. Defaults to <code class="language-plaintext highlighter-rouge">false</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">x509Certificate</code></td>
      <td>Required.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">acsUrl</code></td>
      <td>Required.</td>
    </tr>
  </tbody>
</table>

<h2 id="configuration">Configuration</h2>

<p>Support is enabled by including the following dependency in the WAR overlay:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.apereo.cas<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>cas-server-support-saml-idp<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>${cas.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You may also need to declare the following Maven repository in 
your CAS Overlay to be able to resolve dependencies:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;repositories&gt;</span>
    ...
    <span class="nt">&lt;repository&gt;</span>
        <span class="nt">&lt;id&gt;</span>shibboleth-releases<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;url&gt;</span>https://build.shibboleth.net/nexus/content/repositories/releases<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    ...
<span class="nt">&lt;/repositories&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To see the relevant list of CAS properties, please <a href="Configuration-Properties.html">review this guide</a>.</p>

<h3 id="saml-services">SAML Services</h3>

<p>SAML relying parties and services must be registered within the CAS service registry similar to the following example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"@class"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"org.apereo.cas.support.saml.services.SamlRegisteredService"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"serviceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"the-entity-id-of-the-sp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SAMLService"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10000003</span><span class="p">,</span><span class="w">
  </span><span class="nl">"evaluationOrder"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadataLocation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.testshib.org/metadata/testshib-providers.xml"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<div class="alert alert-info"><strong>Aggregated Metadata</strong><p>If metadata 
contains data for more than one relying party, (i.e. InCommon) those relying parties need to be defined by their entity id, explicitly via 
the <code>serviceId</code> field. </p></div>

<p>The following fields are available for SAML services:</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataLocation</code></td>
      <td>Location of service metadata defined from system files, classpath or URL resources.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataSignatureLocation</code></td>
      <td>Location of the metadata <em>public key</em> to validate the metadata which must be defined from system files or classpath. If defined, will enforce the <code class="language-plaintext highlighter-rouge">SignatureValidationFilter</code> validation filter on metadata.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataMaxValidity</code></td>
      <td>If defined, will enforce the <code class="language-plaintext highlighter-rouge">RequiredValidUntilFilter</code> validation filter on metadata.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">signAssertions</code></td>
      <td>Whether assertions should be signed. Default is <code class="language-plaintext highlighter-rouge">false</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">signResponses</code></td>
      <td>Whether responses should be signed. Default is <code class="language-plaintext highlighter-rouge">true</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">encryptAssertions</code></td>
      <td>Whether assertions should be encrypted. Default is <code class="language-plaintext highlighter-rouge">false</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">requiredAuthenticationContextClass</code></td>
      <td>If defined, will specify the SAML authentication context class in the final response. If undefined, the authentication class will either be <code class="language-plaintext highlighter-rouge">urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</code> or <code class="language-plaintext highlighter-rouge">urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</code> depending on the SAML authentication request.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">requiredNameIdFormat</code></td>
      <td>If defined, will force the indicated Name ID format in the final SAML response.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataCriteriaPattern</code></td>
      <td>If defined, will force an entity id filter on the metadata aggregate based on the <code class="language-plaintext highlighter-rouge">PredicateFilter</code> to include/exclude specific entity ids based on a valid regex pattern.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataCriteriaDirection</code></td>
      <td>If defined, will force an entity id filter on the metadata aggregate based on <code class="language-plaintext highlighter-rouge">PredicateFilter</code>. Allowed values are <code class="language-plaintext highlighter-rouge">INCLUDE</code>,<code class="language-plaintext highlighter-rouge">EXCLUDE</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataCriteriaRoles</code></td>
      <td>If defined, will whitelist the defined metadata roles (i.e. <code class="language-plaintext highlighter-rouge">SPSSODescriptor</code>, <code class="language-plaintext highlighter-rouge">IDPSSODescriptor</code>). Default is <code class="language-plaintext highlighter-rouge">SPSSODescriptor</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataCriteriaRemoveEmptyEntitiesDescriptors</code></td>
      <td>Controls whether to keep entities descriptors that contain no entity descriptors. Default is <code class="language-plaintext highlighter-rouge">true</code>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">metadataCriteriaRemoveRolelessEntityDescriptors</code></td>
      <td>Controls whether to keep entity descriptors that contain no roles. Default is <code class="language-plaintext highlighter-rouge">true</code>.</td>
    </tr>
  </tbody>
</table>

<h3 id="name-id-selection">Name ID Selection</h3>

<p>Each service may specify a required Name ID format. If left undefined, the metadata will be consulted to find the right format. 
The Name ID value is always simply the authenticated user that is designed to be returned to this service. In other words, if you
decide to configure CAS to return a particular attribute as 
<a href="../integration/Attribute-Release-PrincipalId.html">the authenticated user name for this service</a>, 
that value will then be used to construct the Name ID along with the right format.</p>

<h3 id="dynamic-metadata">Dynamic Metadata</h3>

<p>CAS also supports the <a href="https://spaces.internet2.edu/display/InCFederation/Metadata+Query+Protocol">Dynamic Metadata Query Protocol</a>
which is a REST-like API for requesting and receiving arbitrary metadata. In order to configure a CAS SAML service to retrieve its metadata
from a Metadata query server, the metadata location must be configured to point to the query server instance. Here is an example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"@class"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"org.apereo.cas.support.saml.services.SamlRegisteredService"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"serviceId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"the-entity-id-of-the-sp"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SAMLService"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10000003</span><span class="p">,</span><span class="w">
  </span><span class="nl">"evaluationOrder"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadataLocation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://mdq.server.org/entities/{0}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>…where <code class="language-plaintext highlighter-rouge">{0}</code> serves as an entityID placeholder for which metadata is to be queried.</p>

<h2 id="sp-integrations">SP Integrations</h2>

<p>A number of SAML2 service provider integrations are provided natively by CAS. To learn more, 
please <a href="../integration/Configuring-SAML-SP-Integrations.html">review this guide</a>.</p>

                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = '';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
