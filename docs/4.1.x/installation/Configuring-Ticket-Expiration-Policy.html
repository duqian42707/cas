<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - Configuring Ticket Expiration Policy Components</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.3.x/">v6.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.2.x/">v6.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.1.x/">v6.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.0.x/">v6.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.3.x/">v5.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.2.x/">v5.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.1.x/">v5.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.0.x/">v5.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.2.x/">v4.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.1.x/">v4.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.0.x/">v4.0.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    <h2 id="ticket-expiration-policies">Ticket Expiration Policies</h2>
<p>CAS supports a pluggable and extensible policy framework to control the expiration policy of ticket-granting tickets (TGT) and service tickets (ST). Both TGT and ST expiration policy beans are defined in the <code class="language-plaintext highlighter-rouge">/cas-server-webapp/src/main/webapp/WEB-INF/spring-configuration/ticketExpirationPolicies.xml</code> file in the CAS distribution.</p>

<div class="alert alert-info"><strong>Policies Are Not Ticket-Specific</strong><p>Ticket expiration policies are not specific to a particular kind of ticket, so it is possible to apply a policy intended for service tickets to ticket-granting tickets, although it may make little sense to do so.</p></div>

<h3 id="ticket-granting-ticket-policies">Ticket-Granting Ticket Policies</h3>
<p>TGT expiration policy governs the time span during which an authenticated user may grant STs with a valid (non-expired) TGT without having to reauthenticate. An attempt to grant a ST with an expired TGT would require the user to reauthenticate to obtain a new (valid) TGT.</p>

<h4 id="timeoutexpirationpolicy"><code class="language-plaintext highlighter-rouge">TimeoutExpirationPolicy</code></h4>
<p>The default expiration policy applied to TGTs provides for most-recently-used expiration policy, similar to a Web server session timeout. For example, a 2-hour time span with this policy in effect would require a TGT to be used every 2 hours or less, otherwise it would be marked as expired.</p>

<h5 id="parameters">Parameters</h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">timeToKillInMilliSeconds</code> - Maximum amount of inactivity in ms from the last time the ticket was used beyond which it is considered expired.</li>
</ul>

<h5 id="usage-example">Usage Example</h5>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- TGT expires after 2 hours in inactivity --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.TimeoutExpirationPolicy"</span>
      <span class="na">c:timeToKillInMilliSeconds=</span><span class="s">"7200000"</span> <span class="nt">/&gt;</span></code></pre></figure>

<h4 id="hardtimeoutexpirationpolicy"><code class="language-plaintext highlighter-rouge">HardTimeoutExpirationPolicy</code></h4>
<p>The hard timeout policy provides for finite ticket lifetime as measured from the time of creation. For example, a 4-hour time span for this policy means that a ticket created at 1PM may be used up until 5PM; subsequent attempts to use it will mark it expired and the user will be forced to reauthenticate.</p>

<h5 id="parameters-1">Parameters</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">timeToKillInMilliSeconds</code> - Total ticket lifetime in ms.</li>
</ul>

<h5 id="usage-example-1">Usage Example</h5>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- TGT expires 4 hours after creation --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.HardTimeoutExpirationPolicy"</span><span class="nt">&gt;</span>
  c:timeToKillInMilliSeconds="14400000" /&gt;</code></pre></figure>

<h4 id="throttleduseandtimeoutexpirationpolicy"><code class="language-plaintext highlighter-rouge">ThrottledUseAndTimeoutExpirationPolicy</code></h4>
<p>The throttled timeout policy extends the TimeoutExpirationPolicy with the concept of throttling where a ticket may be used at most every N seconds. This policy was designed to thwart denial of service conditions where a rogue or misconfigured client attempts to consume CAS server resources by requesting high volumes of service tickets in a short time.</p>

<h5 id="parameters-2">Parameters</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">timeToKillInMilliSeconds</code> - Maximum amount of inactivity in ms from the last time the ticket was used beyond which it is considered expired.</li>
  <li><code class="language-plaintext highlighter-rouge">timeInBetweenUsesInMilliSeconds</code> - The minimum amount of time permitted between consecutive uses of a ticket.</li>
</ul>

<h5 id="usage-example-2">Usage Example</h5>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!--
TGT expires under one of two conditions:
 * More than 3 hours of inactivity
 * Used consecutively where less than 5 seconds has elapsed from the first use
--&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.ThrottledUseAndTimeoutExpirationPolicy"</span>
  <span class="na">p:timeToKillInMilliSeconds=</span><span class="s">"10800000"</span>
  <span class="na">p:timeInBetweenUsesInMilliSeconds=</span><span class="s">"5000"</span>
<span class="nt">/&gt;</span></code></pre></figure>

<h4 id="neverexpiresexpirationpolicy"><code class="language-plaintext highlighter-rouge">NeverExpiresExpirationPolicy</code></h4>
<p>The never expires policy allows tickets to exist indefinitely.</p>

<div class="alert alert-warning"><strong>Usage Warning!</strong><p>Use of this policy has significant consequences to overall security policy and should be enabled only after thorough review by a qualified security team. There are also implications to server resource usage for the ticket registries backed by filesystem storage. Since disk storage for tickets can never be reclaimed for those registries with this policy in effect, use of this policy with those ticket registry implementations is strongly discouraged.</p></div>

<h5 id="usage-example-3">Usage Example</h5>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- TGT never expires --&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.NeverExpiresExpirationPolicy"</span> <span class="nt">/&gt;</span></code></pre></figure>

<h4 id="remembermedelegatingexpirationpolicy"><code class="language-plaintext highlighter-rouge">RememberMeDelegatingExpirationPolicy</code></h4>
<p>This policy implements applies to <a href="Configuring-Authentication-Components.html">long term authentication</a> features of CAS known as “Remember Me”.</p>

<h5 id="usage-example-4">Usage Example</h5>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.RememberMeDelegatingExpirationPolicy"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"sessionExpirationPolicy"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.TimeoutExpirationPolicy"</span>
                <span class="na">c:timeToKillInMilliSeconds=</span><span class="s">"xxxxxx"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/property&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"rememberMeExpirationPolicy"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"grantingTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.TimeoutExpirationPolicy"</span>
                <span class="na">c:timeToKillInMilliSeconds=</span><span class="s">"xxxxxx"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span></code></pre></figure>

<h3 id="service-ticket-policies">Service Ticket Policies</h3>

<h4 id="multitimeuseortimeoutexpirationpolicy"><code class="language-plaintext highlighter-rouge">MultiTimeUseOrTimeoutExpirationPolicy</code></h4>
<p>This is the default policy applied to service tickets where a ticket is expired after a fixed number of uses or after a maximum period of inactivity elapses.</p>

<h5 id="parameters-3">Parameters</h5>
<ul>
  <li><code class="language-plaintext highlighter-rouge">numberOfUses</code> - Maximum number of times the ticket can be used.</li>
  <li><code class="language-plaintext highlighter-rouge">timeToKill</code> - Maximum amount of inactivity from the last time the ticket was used beyond which it is considered expired.</li>
  <li><code class="language-plaintext highlighter-rouge">timeUnit</code> - The unit of time based on which <code class="language-plaintext highlighter-rouge">timeToKill</code> will be calculated.</li>
</ul>

<h5 id="usage-example-5">Usage Example</h5>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- ST may be used exactly once and must be validated within 10 seconds. --&gt;</span>
<span class="nt">&lt;util:constant</span> <span class="na">id=</span><span class="s">"SECONDS"</span> <span class="na">static-field=</span><span class="s">"java.util.concurrent.TimeUnit.SECONDS"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"serviceTicketExpirationPolicy"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.ticket.support.MultiTimeUseOrTimeoutExpirationPolicy"</span>
      <span class="na">c:numberOfUses=</span><span class="s">"1"</span> <span class="na">c:timeToKillInMilliSeconds=</span><span class="s">"10"</span> <span class="na">c:timeUnit-ref=</span><span class="s">"SECONDS"</span> <span class="nt">/&gt;</span></code></pre></figure>


                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = '';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
