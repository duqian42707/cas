<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="CAS - Enterprise Single Sign-On for the Web"/>
    <meta name="keywords" content="authentication, login, cas, central authentication service, web, java, protocol, thymeleaf,
                   open source, boot, spring, authorization, google, facebook, twitter, higher-ed, enterprise,
                   access management, single signon, sso, RBAC, ABAC, attributes, SAML, OpenID, openid connect,
                   JWT, ADFS"/>
    <meta name="robots" content="index,follow"/>

    
    

        
    


    

    <script>
        ((i, s, o, g, r, a, m) => {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-83384532-2', 'auto');
        ga('send', 'pageview');

    </script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>

    <link rel="stylesheet" type="text/css" media="screen" href="../../stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="print" href="../../stylesheets/print.css">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic&subset=latin-ext,latin' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" rel="stylesheet">

    <title>CAS - Logging Configuration</title>

</head>

<body>
<!-- HEADER -->
<header class="hidden-sm-down">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-md-2">
                <a href="../../index.html">
                    <img class="undecorated" src="../../images/cas_logo.png"/>
                </a>
            </div>
            <div class="col-xs-8 col-md-6">
                <h1>Enterprise Single Sign-On for All</h1>
            </div>
            <div class="hidden-sm-down col-md-4">
                <a id="forkme_banner" href="https://github.com/apereo/cas">View on GitHub</a>
            </div>

        </div>
    </div>
</header>

<!-- NAVBAR -->

<nav class="navbar navbar-expand-md navbar-dark bg-primary bg-dark">
    <div class="container">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="navbar-collapse collapse" id="navbarsExample04">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active"><a href="../../index.html" class="zoom nav-link">Home</a></li>
                <li class="nav-item"><a href="https://github.com/apereo/cas/releases" class="zoom nav-link">Releases</a></li>
                <li class="nav-item"><a href="../../Support.html" class="zoom nav-link">Support</a></li>
                <li class="nav-item"><a href="../../Mailing-Lists.html" class="zoom nav-link">Mailing Lists</a></li>
                <li class="nav-item">
                    <a class="zoom nav-link" href="../../Demos.html">Demos</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="zoom nav-link dropdown-toggle mr-md-2" href="#" id="cas-versions" data-bs-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false">Versions</a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="cas-versions">
                        
                        
                        <a class="dropdown-item" href="/cas/development/">Development</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.6.x/">v6.6.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.5.x/">v6.5.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.4.x/">v6.4.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.3.x/">v6.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.2.x/">v6.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.1.x/">v6.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/6.0.x/">v6.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.3.x/">v5.3.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.2.x/">v5.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.1.x/">v5.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/5.0.x/">v5.0.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.2.x/">v4.2.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.1.x/">v4.1.x</a>
                        
                        
                        
                        <a class="dropdown-item" href="/cas/4.0.x/">v4.0.x</a>
                        
                        

                    </div>
                </li>
                <li class="nav-item"><a href="https://apereo.github.io" target="_blank" class="zoom nav-link">Blog</a></li>
            </ul>

        </div>

    </div>
</nav>


<div class="container-fluid">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar pb-5" id="sidebar"></div>


        <div class="d-none d-xl-block col-xl-2 docs-toc">
    <div id="pageContents">
        <ul class="section-nav"></ul>
    </div>
</div>


        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 cas-docs-content" role="main">


            

            <section>
                <nav id="docsNavBar">
                    <span id="toolbarIcons"></span>
                </nav>

                <div id="cas-docs-container">
                    <h1 id="logging">Logging</h1>
<p>CAS provides a logging facility that logs important informational events like authentication success and failure; it can be customized to produce additional information for troubleshooting. CAS uses the Slf4J Logging framework as a facade for the <a href="http://logging.apache.org‎">Log4J engine</a> by default.</p>

<p>The log4j configuration file is located in <code class="language-plaintext highlighter-rouge">cas-server-webapp/src/main/webapp/WEB-INF/classes/log4j2.xml</code>. By default logging is set to <code class="language-plaintext highlighter-rouge">INFO</code> for all functionality related to <code class="language-plaintext highlighter-rouge">org.jasig.cas</code> code and <code class="language-plaintext highlighter-rouge">WARN</code> for messages related to Spring framework, etc. For debugging and diagnostic purposes you may want to set these levels to  <code class="language-plaintext highlighter-rouge">DEBUG</code>.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">...

<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.jasig"</span> <span class="na">level=</span><span class="s">"info"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"console"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"file"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>

<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.springframework"</span> <span class="na">level=</span><span class="s">"warn"</span> <span class="nt">/&gt;</span>
...</code></pre></figure>

<div class="alert alert-warning"><strong>Usage Warning!</strong><p>When in production though, you probably want to run them both as `WARN`.</p></div>

<h2 id="components">Components</h2>
<p>The log4j configuration is by default loaded using the following components at <code class="language-plaintext highlighter-rouge">cas-server-webapp/src/main/webapp/WEB-INF/spring-configuration/log4jConfiguration.xml</code>:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"log4jInitialization"</span> <span class="na">class=</span><span class="s">"org.jasig.cas.util.CasLoggerContextInitializer"</span>
    <span class="na">c:logConfigurationField=</span><span class="s">"log4jConfiguration"</span>
    <span class="na">c:logConfigurationFile=</span><span class="s">"${log4j.config.location:classpath:log4j2.xml}"</span>
    <span class="na">c:loggerContextPackageName=</span><span class="s">"org.apache.logging.log4j.web"</span><span class="nt">/&gt;</span></code></pre></figure>

<p>It is often time helpful to externalize <code class="language-plaintext highlighter-rouge">log4j2.xml</code> to a system path to preserve settings between upgrades. The location of <code class="language-plaintext highlighter-rouge">log4j2.xml</code> file by default is on the runtime classpath and at minute intervals respective. These may be overridden by the <code class="language-plaintext highlighter-rouge">cas.properties</code> file</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># log4j.config.location=classpath:log4j2.xml</span></code></pre></figure>

<h2 id="configuration">Configuration</h2>
<p>The <code class="language-plaintext highlighter-rouge">log4j2.xml</code> file by default at <code class="language-plaintext highlighter-rouge">WEB-INF/classes</code> provides the following <code class="language-plaintext highlighter-rouge">appender</code> elements that decide where and how messages from components should be displayed. Two are provided by default that output messages to the system console and a <code class="language-plaintext highlighter-rouge">cas.log</code> file:</p>

<h3 id="refresh-interval">Refresh Interval</h3>
<p>The <code class="language-plaintext highlighter-rouge">log4j2.xml</code> itself controls the refresh interval of the logging configuration. Log4j has the ability to automatically detect changes to the configuration file and reconfigure itself. If the <code class="language-plaintext highlighter-rouge">monitorInterval</code> attribute is specified on the configuration element and is set to a non-zero value then the file will be checked the next time a log event is evaluated and/or logged and the <code class="language-plaintext highlighter-rouge">monitorInterval</code> has elapsed since the last check. This will allow you to adjust the log levels and configuration without restarting the server environment.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="c">&lt;!-- Specify the refresh internal in seconds. --&gt;</span>
<span class="nt">&lt;Configuration</span> <span class="na">monitorInterval=</span><span class="s">"60"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Appenders&gt;</span>
        ...</code></pre></figure>

<h3 id="appenders">Appenders</h3>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Console</span> <span class="na">name=</span><span class="s">"console"</span> <span class="na">target=</span><span class="s">"SYSTEM_OUT"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">"%d %p [%c] - &amp;lt;%m&amp;gt;%n"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Console&gt;</span>
<span class="nt">&lt;RollingFile</span> <span class="na">name=</span><span class="s">"file"</span> <span class="na">fileName=</span><span class="s">"cas.log"</span> <span class="na">append=</span><span class="s">"true"</span>
             <span class="na">filePattern=</span><span class="s">"cas-%d{yyyy-MM-dd-HH}-%i.log"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;PatternLayout</span> <span class="na">pattern=</span><span class="s">"%d %p [%c] - %m%n"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;Policies&gt;</span>
        <span class="nt">&lt;OnStartupTriggeringPolicy</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;SizeBasedTriggeringPolicy</span> <span class="na">size=</span><span class="s">"10 MB"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;TimeBasedTriggeringPolicy</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/Policies&gt;</span>
<span class="nt">&lt;/RollingFile&gt;</span></code></pre></figure>

<h3 id="loggers">Loggers</h3>
<p>Additional loggers are available to specify the logging level for component categories.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.jasig"</span> <span class="na">level=</span><span class="s">"info"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"console"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"file"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.springframework"</span> <span class="na">level=</span><span class="s">"warn"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.springframework.webflow"</span> <span class="na">level=</span><span class="s">"warn"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.springframework.web"</span> <span class="na">level=</span><span class="s">"warn"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.springframework.security"</span> <span class="na">level=</span><span class="s">"warn"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.jasig.cas.web.flow"</span> <span class="na">level=</span><span class="s">"info"</span> <span class="na">additivity=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"file"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
<span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.jasig.inspektr.audit.support.Slf4jLoggingAuditTrailManager"</span> <span class="na">level=</span><span class="s">"info"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"file"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span>
<span class="nt">&lt;Root</span> <span class="na">level=</span><span class="s">"error"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"console"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Root&gt;</span></code></pre></figure>

<p>If you wish enable another package for logging, you can simply add another <code class="language-plaintext highlighter-rouge">Logger</code> element to the configuration. Here is an example:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Logger</span> <span class="na">name=</span><span class="s">"org.ldaptive"</span> <span class="na">level=</span><span class="s">"debug"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"console"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;AppenderRef</span> <span class="na">ref=</span><span class="s">"file"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/Logger&gt;</span></code></pre></figure>

<h2 id="log-data-sanitation">Log Data Sanitation</h2>
<p>For security purposes, CAS by default will attempt to remove TGT and PGT ids from all log data. This will of course include messages that are routed to a log destination by the logging framework as well as all audit messages. A sample follows below:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">=============================================================</span>
WHO: audit:unknown
WHAT: TGT-<span class="k">****************************************************</span>123456-cas01.example.org
ACTION: TICKET_GRANTING_TICKET_DESTROYED
APPLICATION: CAS
WHEN: Sat Jul 12 04:10:35 PDT 2014
CLIENT IP ADDRESS: ...
SERVER IP ADDRESS: ...
<span class="o">=============================================================</span></code></pre></figure>

<p>Certain number of characters are left at the trailing end of the ticket id to assist with troubleshooting and diagnostics. This is achieved by providing a specific binding for the SLF4j configuration.</p>

<h1 id="audits">Audits</h1>
<p>CAS uses the <a href="https://github.com/Jasig/inspektr">Inspektr framework</a> for auditing purposes and statistics. The Inspektr project allows for non-intrusive auditing and logging of the coarse-grained execution paths e.g. Spring-managed beans method executions by using annotations and Spring-managed <code class="language-plaintext highlighter-rouge">@Aspect</code>-style aspects.</p>

<h2 id="components-1">Components</h2>

<h3 id="audittrailmanagementaspect"><code class="language-plaintext highlighter-rouge">AuditTrailManagementAspect</code></h3>
<p>Aspect modularizing management of an audit trail data concern.</p>

<h3 id="slf4jloggingaudittrailmanager"><code class="language-plaintext highlighter-rouge">Slf4jLoggingAuditTrailManager</code></h3>
<p><code class="language-plaintext highlighter-rouge">AuditTrailManager</code> that dumps auditable information to a configured logger based on SLF4J, at the <code class="language-plaintext highlighter-rouge">INFO</code> level.</p>

<h3 id="jdbcaudittrailmanager"><code class="language-plaintext highlighter-rouge">JdbcAuditTrailManager</code></h3>
<p><code class="language-plaintext highlighter-rouge">AuditTrailManager</code> to persist the audit trail to the <code class="language-plaintext highlighter-rouge">AUDIT_TRAIL</code> table in a rational database.</p>

<h3 id="ticketasfirstparameterresourceresolver"><code class="language-plaintext highlighter-rouge">TicketAsFirstParameterResourceResolver</code></h3>
<p><code class="language-plaintext highlighter-rouge">ResourceResolver</code> that can determine the ticket id from the first parameter of the method call.</p>

<h3 id="ticketorcredentialprincipalresolver"><code class="language-plaintext highlighter-rouge">TicketOrCredentialPrincipalResolver</code></h3>
<p><code class="language-plaintext highlighter-rouge">PrincipalResolver</code> that can retrieve the username from either the <code class="language-plaintext highlighter-rouge">Ticket</code> or from the <code class="language-plaintext highlighter-rouge">Credential</code>.</p>

<h2 id="configuration-1">Configuration</h2>
<p>Audit functionality is specifically controlled by the <code class="language-plaintext highlighter-rouge">WEB-INF/spring-configuration/auditTrailContext.xml</code>. Configuration of the audit trail manager is defined inside <code class="language-plaintext highlighter-rouge">deployerConfigContext.xml</code>.</p>

<h3 id="database-audits">Database Audits</h3>
<p>By default, audit messages appear in log files via the <code class="language-plaintext highlighter-rouge">Slf4jLoggingAuditTrailManager</code>. If you intend to use a database for auditing functionality, adjust the audit manager to match the sample configuration below:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"auditCleanupCriteria"</span>
    <span class="na">class=</span><span class="s">"org.jasig.inspektr.audit.support.MaxAgeWhereClauseMatchCriteria"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;constructor-arg</span> <span class="na">index=</span><span class="s">"0"</span> <span class="na">value=</span><span class="s">"180"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/bean&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"auditTrailManager"</span>
      <span class="na">class=</span><span class="s">"org.jasig.inspektr.audit.support.JdbcAuditTrailManager"</span>
      <span class="na">c:transactionTemplate-ref=</span><span class="s">"inspektrTransactionTemplate"</span>
      <span class="na">p:dataSource-ref=</span><span class="s">"dataSource"</span>
      <span class="na">p:cleanupCriteria-ref=</span><span class="s">"auditCleanupCriteria"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"inspektrTransactionManager"</span>
      <span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>
      <span class="na">p:dataSource-ref=</span><span class="s">"dataSource"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"inspektrTransactionTemplate"</span>
      <span class="na">class=</span><span class="s">"org.springframework.transaction.support.TransactionTemplate"</span>
      <span class="na">p:transactionManager-ref=</span><span class="s">"inspektrTransactionManager"</span>
      <span class="na">p:isolationLevelName=</span><span class="s">"ISOLATION_READ_COMMITTED"</span>
      <span class="na">p:propagationBehaviorName=</span><span class="s">"PROPAGATION_REQUIRED"</span> <span class="nt">/&gt;</span></code></pre></figure>

<p>You’ll need to have a <code class="language-plaintext highlighter-rouge">dataSource</code> that defines a connection to your database. The following snippet
demonstrates a data source that connects to HSQLDB v1.8:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"dataSource"</span> 
      <span class="na">class=</span><span class="s">"org.apache.commons.dbcp.BasicDataSource"</span> 
      <span class="na">destroy-method=</span><span class="s">"close"</span> <span class="na">lazy-init=</span><span class="s">"true"</span>
      <span class="na">p:poolPreparedStatements=</span><span class="s">"true"</span>
      <span class="na">p:url=</span><span class="s">"jdbc:hsqldb:hsql://localhost:9001/misagh"</span>
      <span class="na">p:username=</span><span class="s">"SA"</span>
      <span class="na">p:password=</span><span class="s">""</span>
      <span class="na">p:driverClassName=</span><span class="s">"org.hsqldb.jdbcDriver"</span>
      <span class="na">p:validationQuery=</span><span class="s">"SELECT 1 FROM INFORMATION_SCHEMA.SYSTEM_USERS;"</span> <span class="nt">/&gt;</span></code></pre></figure>

<p>In order to configure the <code class="language-plaintext highlighter-rouge">dataSource</code> you will furthermore need additional dependencies
in the <code class="language-plaintext highlighter-rouge">pom.xml</code> file that deal with creating connections.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>commons-dbcp<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>commons-dbcp<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${dbcp.version}<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>commons-pool<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>commons-pool<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${commons.pool.version}<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="c">&lt;!-- Replace with your specific database of choice. --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.hsqldb<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hsqldb<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${hsqldb.version}<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;scope&gt;</span>runtime<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span></code></pre></figure>

<p>You will also need the dependency for the database driver that you have chosen.</p>

<p>Finally, the following database table needs to be created beforehand:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">COM_AUDIT_TRAIL</span>
<span class="p">(</span>
    <span class="n">AUD_USER</span>      <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">AUD_CLIENT_IP</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>   <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">AUD_SERVER_IP</span> <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>   <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">AUD_RESOURCE</span>  <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">AUD_ACTION</span>    <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">APPLIC_CD</span>     <span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>   <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">AUD_DATE</span>      <span class="nb">TIMESTAMP</span>     <span class="k">NOT</span> <span class="k">NULL</span>
<span class="p">);</span></code></pre></figure>

<p>You may need to augment the syntax and column types per your specific database implementation.</p>

<h2 id="sample-log-output">Sample Log Output</h2>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">WHO: org.jasig.cas.support.oauth.authentication.principal.OAuthCredentials@6cd7c975
WHAT: supplied credentials: org.jasig.cas.support.oauth.authentication.principal.OAuthCredentials@6cd7c975
ACTION: AUTHENTICATION_SUCCESS
APPLICATION: CAS
WHEN: Mon Aug 26 12:35:59 IST 2013
CLIENT IP ADDRESS: 172.16.5.181
SERVER IP ADDRESS: 192.168.200.22

WHO: org.jasig.cas.support.oauth.authentication.principal.OAuthCredentials@6cd7c975
WHAT: TGT-9-qj2jZKQUmu1gQvXNf7tXQOJPOtROvOuvYAxybhZiVrdZ6pCUwW-cas01.example.org
ACTION: TICKET_GRANTING_TICKET_CREATED
APPLICATION: CAS
WHEN: Mon Aug 26 12:35:59 IST 2013
CLIENT IP ADDRESS: 172.16.5.181
SERVER IP ADDRESS: 192.168.200.22</code></pre></figure>


                </div>
            </section>
        </main>
    </div>
</div>


<footer>
    <div class="container">
        CAS is supported by the <a href="https://www.apereo.org/">Apereo Foundation</a>.
    </div>
</footer>

<script>
    let pageSection = '';
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.2/js/tether.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>

<script src="../../javascripts/URI.js"></script>
<script src="../../javascripts/main.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
</body>

</html>
